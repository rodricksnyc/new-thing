import difference from 'lodash/difference';
import find from 'lodash/find';
import isArray from 'lodash/isArray';
import map from 'lodash/map';
import take from 'lodash/take';
import union from 'lodash/union';
import nth from 'lodash/nth';
import pull from 'lodash/pull';
export var calculateSuggestOptions = function calculateSuggestOptions(filterTokenProps) {
  var max = filterTokenProps.max,
      options = filterTokenProps.options,
      values = filterTokenProps.value;

  if (!isArray(values) || !find(values, function (val) {
    return typeof val === 'string';
  })) {
    return max ? take(options, max) : options;
  }

  var existingValues = map(values, function (v) {
    return find(options, {
      value: v
    }) || {
      value: v,
      label: 'âˆ… - ' + v
    };
  }) || [];

  if (max) {
    if (existingValues.length >= max) {
      return take(existingValues, max);
    } else {
      var suggestionOptions = [];

      for (var optionIndex = 0; optionIndex < max - existingValues.length; optionIndex++) {
        var option = nth(options, optionIndex);

        if (!option) {
          break;
        }

        pull(existingValues, option);
        suggestionOptions.push(option);
      }

      return union(suggestionOptions, existingValues);
    }
  } else {
    var unfoundValues = difference(existingValues, options) || [];
    return union(options, unfoundValues);
  }
};
//# sourceMappingURL=calculate_suggest_options.js.map